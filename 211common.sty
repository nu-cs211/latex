% vim: se et:
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{211common}[2020/04/11 0.0.1]

\newcommand\TERM{Fall 2020}
\newcommand\COURSENO{CS 211}
\newcommand\WEBROOT{https://users.cs.northwestern.edu/~jesse/course/cs211}

\catcode`~11\relax
\newcommand\plaintilde{\hbox{~}}
\catcode`~13\relax

\newcommand\LabHostnames@Url
  {it.eecs.northwestern.edu/info/2015/11/03/info-labs.html\#workstations}
\newcommand\LabHostnames@ShortUrl
  {https://bit.ly/3c1qyui}
\newcommand\LabHostnamesLink
  {\href{\LabHostnames@ShortUrl}{{\UrlFont{\LabHostnames@Url}}}}
% Probably update this next year:
\newcommand\Cxx@setup@local{\WEBROOT/notes/toolchain_setup.html}
\newcommand\Cxx@setup@linux{\WEBROOT/notes/ge211_linux.html}

\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{211lang}}
\ProcessOptions\relax

\RequirePackage{211lang}
\RequirePackage[svgnames]{xcolor}
\RequirePackage{fancyvrb}
\RequirePackage{microtype}
\RequirePackage{url}
\RequirePackage{underscore}
\RequirePackage{amsmath}
\RequirePackage{hyperref}

\newcommand\@pad@two[1]{\@pad@two@check#1\\}
\newcommand\@pad@two@check[2]{%
  \ifx#2\\0\fi
  #1%
}

\urlstyle{sf}

\newcommand\ZII@shade{85}
\colorlet{ZII@linkcolor}{violet}
\colorlet{ZII@citecolor}{Goldenrod}
\colorlet{ZII@urlcolor}{NavyBlue}

\hypersetup{
  linkcolor  = ZII@linkcolor!\ZII@shade!black,
  citecolor  = ZII@citecolor!\ZII@shade!black,
  urlcolor   = ZII@urlcolor!\ZII@shade!black,
  colorlinks = true,
}

\newcommand\progname[1]{\emph{#1}}
\newcommand\hostname[1]{\emph{#1}}
\newcommand\filename[1]{\textsf{#1}}
\newcommand\varname[1]{\textsf{#1}}
\newcommand\functionname[1]{\textsl{#1}}
\newcommand\functionref[2]{\functionname{#1}(#2)}
\newcommand\promptchar{\%}
\newcommand\prompt{{\normalfont\ttfamily\itshape\promptchar}}
\newcommand\cmdline[1]{\prompt{\normalfont\ttfamily~#1}}
\newcommand\keycombo[1]{\textsf{#1}}

\newcommand\codestyleBasic       {\ttfamily\color{black}}
\newcommand\codestyleComment     {\rmfamily\color{gray}\slshape}

\newcommand\codestyle@color[1]   {\ttfamily\color{#1!black}}

\newcommand\codestyleDirective   {\codestyle@color{magenta!80}}
\newcommand\codestyleLiteral     {\codestyle@color{violet!90}\slshape}
\newcommand\codestyleKeyword     {\codestyle@color{green!30}\bfseries}

\newcommand\codestyleStdMacro    {\codestyle@color{orange!40}\bfseries}
\newcommand\codestyleLibMacro    {\codestyle@color{orange!40}\bfseries}
\newcommand\codestyleCourseMacro {\codestyle@color{orange!40}\bfseries}

\newcommand\codestyleStdType     {\codestyle@color{cyan!60}}
\newcommand\codestyleLibType     {\codestyle@color{cyan!60}}
\newcommand\codestyleCourseType  {\codestyle@color{cyan!60}}

\newcommand\codestyleStdObject   {\codestyle@color{blue!60}}
\newcommand\codestyleLibObject   {\codestyle@color{blue!60}}
\newcommand\codestyleCourseObject{\codestyle@color{blue!60}}

\colorlet{metavar@color}{DarkCyan}
\newcommand\metavar[1]{%
  \textcolor{metavar@color}{%
    \ensuremath\langle
    {\normalfont\itshape#1}%
    \ensuremath\rangle%
  }%
}

\lstset{%
  escapeinside={‹}{›},
  upquote=true,
  basicstyle=\codestyleBasic,
  commentstyle=\codestyleComment,
  directivestyle=\codestyleDirective,
  stringstyle=\codestyleLiteral,
  numberstyle=\codestyleLiteral,
  keywordstyle=[1]\codestyleStdObject,
  keywordstyle=[2]\codestyleKeyword,
  keywordstyle=[3]\relax,  % empty
  keywordstyle=[4]\codestyleStdType,
  keywordstyle=[5]\codestyleStdMacro,
  keywordstyle=[6]\codestyleLibType,
  keywordstyle=[7]\codestyleLibObject,
  keywordstyle=[8]\codestyleCourseMacro,
  keywordstyle=[9]\codestyleCourseType,
  keywordstyle=[10]\codestyleCourseObject,
}

\newcommand\inputText[1]{\textbf{\textcolor{magenta!60!black}{#1}}}

\def\Cmd@output#1\\{\item{#1}}
\def\Cmd@prompt@cont#1#2\\{\Cmd@output#1\prompt~\inputText{#2}\\}
\def\Cmd@input#1\\{\Cmd@output\inputText{#1}\\}
\def\Cmd@error#1\\{\Cmd@output\underline{#1}\\}

\newcommand\Cmd@status[1]{%
  \ifx#1\relax\else
    \textcolor{red!70!black}{[\textbf{#1}]}%
  \fi
}

\newcommand\Cmd@prompt[1][\relax]{%
  \Cmd@prompt@cont{\Cmd@status{#1}}%
}

\newenvironment{CmdLine}[1][3em]
  {%
    \ttfamily
    \let\O\Cmd@output
    \let\C\Cmd@prompt
    \let\I\Cmd@input
    \let\E\Cmd@error
    \def\ETC{\O\ensuremath{\vdots}\\}%
    \def\finish@CmdLine{\O\prompt\\}%
    \def\NoPrompt{\let\finish@CmdLine\relax}%
    \begin{list}{}{
      \leftmargin=#1%
      \parsep=0pt%
      \itemsep=-1pt%
    }
  }
  {%
    \finish@CmdLine
    \end{list}%
  }

\newenvironment{CmdLine*}[1][3em]
  {\begin{CmdLine}}
  {\NoPrompt\end{CmdLine}}
